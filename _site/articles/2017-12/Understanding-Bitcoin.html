<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="msvalidate.01" content="23FC806069D5C2D348A94A2A7E7FAE88" />

  <title>Understanding Bitcoin</title>
  <meta name="description" content="Exploring the inner workings of bitcoin">

  <!-- CSS files -->
  <link rel="stylesheet" href="http://localhost:4000/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://localhost:4000/css/main.css">

  <link rel="canonical" href="http://localhost:4000/articles/2017-12/Understanding-Bitcoin">
  <link rel="alternate" type="application/rss+xml" title="Anand" href="http://localhost:4000/feed.xml" />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
</head>


<!--

############################## Hello Hacker ########################################################

Hi Hacker ! Looks like you're more curious about my code than my articles :P
That's perfectly fine. I too, like inspecting websites. This blog is set up
using jekyll, again I have an article for that if you would like to know more.
Now avoid yourself the trouble of using these browser developer tools to analyse my website.
I have made things simpler, you can find the entire source code 
of my website here : https://github.com/anandjoshi91/anandjoshi91.github.io

Feel free to get in touch with me. I would love to hear your crazy ideas :)

Happy Coding \m/

############################## Hello Hacker ########################################################

-->

<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <a href="http://localhost:4000/" class="author_name"></a>
  <span class="author_job"></span>
  <span class="author_bio mbm"></span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="http://localhost:4000/">home</a>
        <span>/</span>
      </li>
           
      <li class="nav-item">
        <a href="http://localhost:4000/about/">About</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="http://localhost:4000/tags/">Tags</a>
        
          <span>/</span>
        
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/categories/">Categories</a>
        
          <span>/</span>
        
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/archive/">Archive</a>
        
          <span>/</span>
        
      </li>
                   
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <a class="btn" href= "http://localhost:4000/" >
  Home
</a>

<div class="post-image-feature">
  <img class="feature-image" src=
  
  "http://localhost:4000/img//2017/bitcoin.PNG"
  
  alt="Understanding Bitcoin feature image">

  
</div><!-- /.image-wrap -->



<div id="post">
  <header class="post-header">
    <h1 title="Understanding Bitcoin">Understanding Bitcoin</h1>
    <span class="post-meta">
      <span class="post-date">
        10 DEC 2017
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    12 mins read
  
</span>

    </span>

  </header>

  <article class="post-content">
    <p>Welcome to part 2 of the article series exploring our monetary system, bitcoin, and blockchain. In the <a href="/articles/2017-11/Decrypting-Crypto-Currencies" target="_blank">last article</a> we learned about our monetary system and the problems associated with it. In this article, we will try to understand inner workings of <code class="highlighter-rouge">bitcoin</code>.</p>

<h2 id="decentralised-system">Decentralised system</h2>
<p>When Tim Berners Lee invented the <code class="highlighter-rouge">World Wide Web</code>, he envisioned an open and connected world where anyone can simply start a server and share their content with the world. Nobody owns internet yet everybody is a part of it. The internet is one of the finest examples of a decentralized system. Though over years, there has been a massive concentration of the power and this is because these big giants like Amazon, Google, FaceBook etc provide ease and convenience through their services, luring people to route the world wide web through their systems. And we also see the problems with it - NSA spying on us by partnering with these big companies. Governments censoring internet etc. Going ahead we’ll see how a blockchain can help in redesigning the World Wide Web so that it truly becomes decentralized as it was intended to be.</p>

<p>A truly decentralized system is such a system that does not have any central authority. The system works by the interaction of the peers amongst themselves. People are free to join the system, they are also free to leave it if they wish so. It is very difficult to bring down such a system, because you don’t know who are the entities of this system. For example look at BitTorrent - it is a simple peer to peer file sharing protocol. No matter how hard governments try they will never be able to uproot it completely and on the other hand see how easy it was for the government to bring down a centralized - peer to peer file sharing system - Napster.</p>

<p align="center">
    <img src="/img/2017/centralised-decentralised-distributed.png" alt="centralised-decentralised-distributed" />
</p>

<p>So now we can appreciate the tenacity of a decentralized system. But there are also some problems akin to such systems. Since there is no one really in charge of such a system, you could see some entities harming others, building their associates having common malicious intentions. And it is very difficult to keep a decentralized system healthy and free of malicious agents unless we don’t employ central authorities that guard the system against such agents. So we see, here we have a trade-off between the freedom of decentralized system and security of a centralized system. No matter that Google/Facebook/Microsoft do have control over our personal data, but they also try to prevent it from hackers and other malicious agents.</p>

<p>So now that you’re somewhat familiar with a decentralized system, let us try to understand what is Bitcoin.</p>

<h2 id="bitcoin">Bitcoin</h2>
<p>Bitcoin is a digital cash/coin that is tracked by transaction entries in a ledger. Cool, that was simple. Umm.. so who is responsible for maintaining this ledger? -“Nobody”. In fact, no single person or a central authority maintains or controls it, but rather the users and the community as a whole maintain it. But now you may ask, how do you ensure that all the ledger entries are the same? What if some malicious users in the network enter wrong entries into the ledger or worst send same money to two users, i.e double spend. How can all the nodes in the network come to a consensus about an entry in a ledger. These are some tough challenges for a decentralized application and let us try to understand each one of them separately and see how Satoshi-San cleverly bootstrapped a decentralized coin which seemed impossible to solve at first glance.</p>

<p align="center">
    <img src="/img/2017/centralized-and-distributed-ledger.jpg" alt="centralized-and-distributed-ledger" />
</p>

<h3 id="how-does-it-work">How does it work?</h3>

<p>We’ll break down this into small blocks and link them one by one [pun intended] to build our understanding of this system.</p>

<ol>
  <li><a href="https://learncryptography.com/hash-functions/what-are-hash-functions" target="_blank">Hashes</a> -  In math and computer science a hash is a one way function that takes any string, number, text or any digital piece of information, runs an algorithm and converts it into a unique and short representation of that digital information, called a hash. Another property of hash is such that if the input was to be changed even slightly then the resulting hash would be very different. Hence you could use the hash to ensure that the digital data that you have was not tampered with and if it was then the resulting hash would be different and you could identify it quickly. Also note that given a hash, it is impossible to find out what the original input was.</li>
</ol>

<p align="center">
    <img src="/img/2017/hashing.png" alt="hashing" />
</p>

<ol>
  <li>
    <p><a href="https://en.wikipedia.org/wiki/Public-key_cryptography" target="_blank">Asymmetric cryptography</a> - In an asymmetric cryptography, a user generates two keys - private key and public key. As the name suggests the private key is personal and not revealed to anyone whereas the public key can be freely shared with everyone. If a person wants to send any message/data he will sign it with his private key [think of this sign as a hash produced by taking the private key and the data/message as the input]. Asymmetric cryptography is such that, now anyone can verify that this data/message was really signed by that same person. If an intruder tries to change the signed copy of the data then the verification will fail and anyone reading this data/message will come to know this message has been tampered with.</p>
  </li>
  <li>
    <p>Immutable ledgers - As described above bitcoin is nothing but a distributed ledger shared and updated by its users. The ledger is such that any entry written into it cannot be forged or edited. And of course by now you are smart enough to realize this verification would be possible by checking the hash. So what do these ledgers contain? It simply contains a message like “Mr. A sends x amount of coins to Ms. B” and it is digitally signed as explained above by Mr. A’s private key. Now anyone can verify this by checking it with Mr. A’s public key. Now rather than using Mr. A’s real name in the transaction, the transaction contains A’s public address which is his public key. Hence Bitcoin provides pseudo-anonymity. As far as you keep using random addresses for each transaction, no one will be able to identify you. Okay, now the list of such messages having transactions of the coins are called blocks. Each block is connected to a previous block of transactions through hashes such that if any one of the blocks is fudged then all the blocks before and including it gets a different resulting hash and this creates what is called a “fork” in the chain. Now bitcoin is designed such that whenever a fork happens all the nodes chose the chain having the largest number of blocks. Now you may ask, what if the malicious users start building a longer chain together? Yes, they can but bitcoin prevents this through <code class="highlighter-rouge">Proof of Work</code> which we’ll explore once we understand the consensus algorithm.</p>
  </li>
</ol>

<p align="center">
    <img src="/img/2017/asymmetric-cryptography.png" alt="asymmetric-cryptography" />
</p>

<ol>
  <li>Consensus - Now we come to the most important part of the bitcoin system. Consensus means an agreement of all the nodes that the ledger has same values. This is the heart of the bitcoin design as you see it has many challenges. Let us first list down the bitcoin consensus algorithm and then dive deeper into it.</li>
</ol>

<p align="center">
    <img src="/img/2017/blockchain-mining-consensus.jpg" alt="blockchain-mining-consensus" />
</p>

<p>The algorithm.</p>
<ul>
  <li>When any person exchanges bitcoin with another person they are broadcasted to all the nodes in the bitcoin network.</li>
  <li>Each node collects these new transactions into a block [currently block of size 1 MB].</li>
  <li>In each round, a random(we’ll get to this later) node gets to broadcast its block.</li>
  <li>Other nodes accept the block if all the transactions are valid [coin spending, valid signatures etc]</li>
  <li>Nodes express their acceptance of the block by including its hash in the next block that they create.</li>
</ul>

<p>Okay. So this was fairly simple. Now let us check what a malicious node can do in such a system and how bitcoin prevents it?</p>

<p>a. Steal other person’s coin</p>
<ul>
  <li>If someone tries to do that then they can not “sign” the block or use the coins as they do not have the “private key” as far as the private key is safe, there is no way to spend someone’s coin even if they are stolen! There are further methods like <a href="https://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing" target="_blank">secret sharing algorithm</a> to make your keys more secure.</li>
</ul>

<p>b. Deny transaction to a person</p>
<ul>
  <li>Nodes are chosen randomly(more on it later). Hence in later rounds, an honest node will get that transaction and process it. So this too isn’t an issue.</li>
</ul>

<p>c. Double spend the coins</p>
<ul>
  <li>As described before in case of two or more versions of chains a <strong>fork</strong> happens and bitcoin is programmed to automatically picks up the longest chain. As long as the honest members keep building the blocks it will be difficult for the malicious attackers to outpace and build a longer chain. The longer the chain gets the more trust it builds [we’ll see this how in a minute] and hence after receiving coins we wait for some more blocks to be added on top of our block to get a longer chain and more confidence that this transaction forms part of the universally agreed ledger or consensus chain. [Currently, we wait for 6 confirmations I,e wait for 6 more blocks to be added to the block before we sign the deal. 6 is just an accepted number, you could wait more or less number of transactions depending on the stake of the deal you’re doing it !]</li>
</ul>

<p align="center">
    <figure>
        <img src="/img/2017/forking.png" alt="blockchain-forking" />
        <figcaption>Forking in bitcoin blockchain</figcaption>
    </figure>
</p>

<h3 id="proof-of-work">Proof of work</h3>
<p>So after understanding the basic mechanism of a blockchain the obvious questions in your mind would be, how does bitcoin ensure that the nodes remain honest? Bitcoin solves this problem by incentivizing the nodes that provide a correct and valid block. The node is rewarded by 12.5 BTC [currently] and is halved every 4 years. [Eventually becoming close to zero, but never really zero, and roughly having 21 million bitcoins by 2140] The second incentive is transaction fees. The node processing the transaction can levy certain transaction fee. This mechanism of incentives encourages nodes to remain honest and cooperate rather than cheat and destroy the system.</p>

<p>The second question would be how can it ensure, some malicious nodes don’t just add number of blocks and build a longer chain to displace the honest and valid chain. Bitcoin solves this by making the process of block creation expensive for a node. Each node is given a mathematical puzzle - a hash puzzle that can only be solved by trying a very large number of random guesses. So at a given time, all the nodes in the bitcoin network are solving this puzzle and the node that gets the right answer wins and gets to include its block in the chain. This process is called <code class="highlighter-rouge">mining</code> as the node is rewarded with fresh new coins for solving this puzzle. Okay so you get what mining is but still, you would be thinking, what is the real purpose of doing this? Yes, it indeed has a deeper implication for the security of the network. Mining is computationally expensive and non-deterministic hence the first problem it resolves is that no node can gain the monopoly in creating the next block and thus monopoly in earning the block reward. Second it prevents the <a href="https://en.wikipedia.org/wiki/Sybil_attack" target="_blank">Sybil attack</a>, that is a single adversary controlling multiple nodes. Adding more nodes entails buying expensive computers and processors and hence makes it unviable for the adversary. Now you can understand why it is expensive for an adversary to fork and build another longest chain. As long as 50% of the users are honest [they are lured to be through clever incentive mechanisms] you can be certain that blockchain is safe. Note that an adversary planning to do a <a href="https://www.investopedia.com/terms/1/51-attack.asp" target="_blank">51% attack</a> needs to amass computing power more than first 500 supercomputers in the world as of now. Going ahead as more and more nodes start linking to bitcoin network this will become even harder and virtually unhackable.</p>

<p>Another question you might have is, as more and more nodes start mining, it should be easy and faster for the network to mine the coins. The current design of bitcoin system is such that the difficulty of the puzzle is parameterized. That means, currently it is programmed to re-calculate the difficulty of the puzzle in the entire bitcoin network every 2 weeks. So if more nodes join the network, then the difficulty also increases and vice-versa. This re-tuning of the difficulty ensures that the average block generation time is roughly 10 minutes.</p>

<h2 id="summary">Summary</h2>

<p>Now let us summarise by watching this video which shows a live blockchain example.</p>

<center>
    <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/_160oMzblY8" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen=""></iframe>
</center>

<h2 id="conclusion">Conclusion</h2>
<p>I hope that you can understand how bitcoin works and appreciate how it presents to the world a financial instrument of the <a href="https://www.investopedia.com/terms/f/freemarket.asp" target="_blank">free market</a>.Again if you feel like reading more then you should read the <a href="https://bitcoin.org/bitcoin.pdf" target="_blank">white paper</a> authored by Satoshi Nakamoto.</p>

<h2 id="next">Next</h2>
<p>In the next article, we will understand what are the issues currently faced by bitcoin blockchain. We’ll try and get a broader and wider application of the underlying technology used in bitcoin - <code class="highlighter-rouge">the blockchain</code> and explore some interesting and disruptive applications of it outside the world of finance. We will also see what the future of cryptocurrencies would be like.</p>

<p class="notice">I hope this was helpful. I would be happy to take your questions/suggestions and feedback.</p>

  </article>
</div>

<div class="share-buttons">
  <h6>Share on: </h6>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/articles/2017-12/Understanding-Bitcoin" class="twitter btn" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/2017-12/Understanding-Bitcoin" class="facebook btn" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://localhost:4000/articles/2017-12/Understanding-Bitcoin" class="google-plus btn" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
    <li>
      <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/articles/2017-12/Understanding-Bitcoin" class="hacker-news btn" title="Share on Hacker News"><i class="fa fa-hacker-news"></i><span> Hacker News</span></a>
    </li>
    <li>
      <a href="https://www.reddit.com/submit?url=http://localhost:4000/articles/2017-12/Understanding-Bitcoin" class="reddit btn" title="Share on Reddit"><i class="fa fa-reddit"></i><span> Reddit</span></a>
    </li>
  </ul>
</div><!-- end share-buttons -->

<nav class="post-navigation" role="navigation">
  <div class="row">
    <div class="col s5">
      <div class="post-nav-prev">
        
        <a href="http://localhost:4000/articles/2017-11/Decrypting-Crypto-Currencies" title="Decrypting Crypto Currencies">
          <div class="post-nav-btn">
            <div class="post-nav-text"><span class="success-text-color"><i class="fa fa-arrow-left" aria-hidden="true"></i> </span><span class="hidden-md primary-text-color">Decrypting Crypto Currencies</span></div>
          </div>
        </a>
        
      </div>
    </div>
    <div class="col s2">
      <a href="http://localhost:4000/">
        <div class="leonids-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
      </a>
    </div>
    <div class="col s5 right">
      <div class="post-nav-next">
        
        <a href="http://localhost:4000/articles/2018-09/Blockchain-The-Internet-of-Trust" title="Decrypting Crypto Currencies">
          <div class="post-nav-btn">
            <div class="post-nav-text"><span class="hidden-md primary-text-color">Blockchain -  The Internet Of Trust</span><span class="success-text-color"> <i class="fa fa-arrow-right" aria-hidden="true"></i></i></span></div>
          </div>
        </a>
        
      </div>
    </div>
  </div>
</nav>

<div class="col-sm-3">
	<div id="search" align="center" style="margin-top:20px;">
	  <form role="search" method="get" action="/search/" class="form-inline">
	     <div class="form-group">
	       <input style="height:36px;font-size:12pt;width: 100%"; id="searchString" name="searchString"
	              placeholder="Search for articles/posts/songs/projects..." type="text"><br/>
	       <input style="width: 100%" class="btn" id="searchButton" name="googleSearchName" type="submit" value="Search">
	     </div>  
	  </form>
	</div>
</div>
 <div class="col-sm-3">
    <!-- Begin MailChimp Signup Form -->
    <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
    <style type="text/css">
    	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
    	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
    	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
    </style>
    <div id="mc_embed_signup">
    <form action="//anandjoshi.us14.list-manage.com/subscribe/post?u=be458ebda1fb81a6e8927336c&amp;id=a3d66d381e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">
    	<label for="mce-EMAIL"></label>
    	<input style="width: 100%" type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_be458ebda1fb81a6e8927336c_a3d66d381e" tabindex="-1" value=""></div>
        <br/>
        <input style="width: 100%" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-info">
        </div>
    </form>
    </div>
</div>
    <!--End mc_embed_signup-->




<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'disqus-xhnqvb9w3g';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>






        <footer class="notice" style="margin-bottom:5px;margin-top:15px;">
  &copy; 2019 Anand Joshi. Listen to your <i class="fa fa-heart heart-icon"></i>
</footer>

      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://localhost:4000/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>

<!-- mermaidjs -->
<script src="http://localhost:4000/js/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85824802-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>
